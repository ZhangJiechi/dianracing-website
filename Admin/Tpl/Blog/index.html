<include file="../header" />
<div id="left-sider"><include file="../left-sider" /></div>
<div id="main">
  <div class="main-hd">
    <h2>List of Blog</h2>
  </div>
  <div class="main-bd">
  <form id="blogToDelForm" action="remove" method="post" target="_self">
    <div>
      <p>
        <input type="submit" value="删除" />
        <a href="create">新增</a></p>
    </div>
    <div>
      <table width="100%" border="1" class="table-list">
        <tr>
          <th><input type="checkbox" id="blogToDelCtrl"/></th>
          <th>Title</th>
          <th>Author</th>
          <th>Date</th>
          <th>Language</th>
        </tr>
        <volist name="blogs" id="blog">
          <tr>
            <td class="text-center"><input class="blogToDel" type="checkbox" name="blogToDel[]" value="{$blog.id}"/></td>
            <td><a href="edit/id/{$blog.id}" target="_self">{$blog.title}</a></td>
            <td>{$blog.author}</td>
            <td>{$blog.createtime|date="Y-m-d",###}</td>
            <td>{$blog.lang}</td>
          </tr>
        </volist>
      </table>
    </div>
    </div>
  </form>
</div>
<include file="../footer" /> 
<script type="text/javascript">
var blogToDel = document.querySelectorAll('.blogToDel');
document.getElementById('blogToDelCtrl').addEventListener('click',function(){
		if(this.checked) {
			for(var i=0; i<blogToDel.length; i++) {
				blogToDel[i].checked = true;
			}
		} else {
			for(var i=0; i<blogToDel.length; i++) {
				blogToDel[i].checked = false;
			}
		}
}, false);

document.getElementById('blogToDelForm').addEventListener('submit',function(e){
		if(!confirm('删除后无法恢复，你是否要继续？')) {
				e.preventDefault();
				return false;
		}
}, false);
</script>